<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用容器-配置网络 | Huidong Blogs</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/logo.jpg">
    <script>var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b4efcb3b959fd674ffa886696241c972";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <meta name="description" content="使用容器-配置网络">
    <meta name="keywords" content="Huidong Blogs">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.2b7af6e1.css" as="style"><link rel="preload" href="/assets/js/app.c004ce88.js" as="script"><link rel="preload" href="/assets/js/4.beb5e9d1.js" as="script"><link rel="preload" href="/assets/js/1.39930c36.js" as="script"><link rel="preload" href="/assets/js/3.95e91fe0.js" as="script"><link rel="preload" href="/assets/js/209.a11ead2c.js" as="script"><link rel="prefetch" href="/assets/js/10.af4ee541.js"><link rel="prefetch" href="/assets/js/100.be469ed8.js"><link rel="prefetch" href="/assets/js/101.0de873a0.js"><link rel="prefetch" href="/assets/js/102.b0af2aaa.js"><link rel="prefetch" href="/assets/js/103.5054ee81.js"><link rel="prefetch" href="/assets/js/104.53b53477.js"><link rel="prefetch" href="/assets/js/105.dca5cd95.js"><link rel="prefetch" href="/assets/js/106.8256a53d.js"><link rel="prefetch" href="/assets/js/107.cf51d929.js"><link rel="prefetch" href="/assets/js/108.62a55f05.js"><link rel="prefetch" href="/assets/js/109.465bfd72.js"><link rel="prefetch" href="/assets/js/11.51845375.js"><link rel="prefetch" href="/assets/js/110.bb947406.js"><link rel="prefetch" href="/assets/js/111.9de08c2d.js"><link rel="prefetch" href="/assets/js/112.189017f4.js"><link rel="prefetch" href="/assets/js/113.856b958e.js"><link rel="prefetch" href="/assets/js/114.03c1d12d.js"><link rel="prefetch" href="/assets/js/115.13d5e070.js"><link rel="prefetch" href="/assets/js/116.f9c4de66.js"><link rel="prefetch" href="/assets/js/117.2ad66b04.js"><link rel="prefetch" href="/assets/js/118.c14dce6b.js"><link rel="prefetch" href="/assets/js/119.cff4fc42.js"><link rel="prefetch" href="/assets/js/12.7f055be5.js"><link rel="prefetch" href="/assets/js/120.68a9a1da.js"><link rel="prefetch" href="/assets/js/121.fec7d92f.js"><link rel="prefetch" href="/assets/js/122.394158e5.js"><link rel="prefetch" href="/assets/js/123.95881f7a.js"><link rel="prefetch" href="/assets/js/124.c2a8fc0a.js"><link rel="prefetch" href="/assets/js/125.63f16066.js"><link rel="prefetch" href="/assets/js/126.f668bb85.js"><link rel="prefetch" href="/assets/js/127.e18e8fa6.js"><link rel="prefetch" href="/assets/js/128.0ab8af21.js"><link rel="prefetch" href="/assets/js/129.8afca988.js"><link rel="prefetch" href="/assets/js/13.457455c3.js"><link rel="prefetch" href="/assets/js/130.2241a622.js"><link rel="prefetch" href="/assets/js/131.9f5df6f3.js"><link rel="prefetch" href="/assets/js/132.301f3bd2.js"><link rel="prefetch" href="/assets/js/133.ef113ec2.js"><link rel="prefetch" href="/assets/js/134.b02d0aff.js"><link rel="prefetch" href="/assets/js/135.be51ec6b.js"><link rel="prefetch" href="/assets/js/136.41f51a50.js"><link rel="prefetch" href="/assets/js/137.3763b955.js"><link rel="prefetch" href="/assets/js/138.8b8beb84.js"><link rel="prefetch" href="/assets/js/139.1cfc6a25.js"><link rel="prefetch" href="/assets/js/14.a6a77363.js"><link rel="prefetch" href="/assets/js/140.73ad01b3.js"><link rel="prefetch" href="/assets/js/141.b299834e.js"><link rel="prefetch" href="/assets/js/142.41973b10.js"><link rel="prefetch" href="/assets/js/143.86663013.js"><link rel="prefetch" href="/assets/js/144.f5e81b61.js"><link rel="prefetch" href="/assets/js/145.0934b438.js"><link rel="prefetch" href="/assets/js/146.ed214dd0.js"><link rel="prefetch" href="/assets/js/147.2fa0cbba.js"><link rel="prefetch" href="/assets/js/148.d2a209f4.js"><link rel="prefetch" href="/assets/js/149.3576f4cf.js"><link rel="prefetch" href="/assets/js/15.e3984b0f.js"><link rel="prefetch" href="/assets/js/150.8fc92cf9.js"><link rel="prefetch" href="/assets/js/151.b862b99a.js"><link rel="prefetch" href="/assets/js/152.dff556f3.js"><link rel="prefetch" href="/assets/js/153.ce70342f.js"><link rel="prefetch" href="/assets/js/154.19365609.js"><link rel="prefetch" href="/assets/js/155.c6f98771.js"><link rel="prefetch" href="/assets/js/156.03a94b0d.js"><link rel="prefetch" href="/assets/js/157.19790efd.js"><link rel="prefetch" href="/assets/js/158.a7af2a81.js"><link rel="prefetch" href="/assets/js/159.ccd71fc2.js"><link rel="prefetch" href="/assets/js/16.65c3e32a.js"><link rel="prefetch" href="/assets/js/160.d532a3c0.js"><link rel="prefetch" href="/assets/js/161.2f05d7a8.js"><link rel="prefetch" href="/assets/js/162.690825ed.js"><link rel="prefetch" href="/assets/js/163.77073e1f.js"><link rel="prefetch" href="/assets/js/164.14349df6.js"><link rel="prefetch" href="/assets/js/165.086c3aad.js"><link rel="prefetch" href="/assets/js/166.b8048819.js"><link rel="prefetch" href="/assets/js/167.16db07bf.js"><link rel="prefetch" href="/assets/js/168.b9e4a477.js"><link rel="prefetch" href="/assets/js/169.b9009b9f.js"><link rel="prefetch" href="/assets/js/17.5233dd36.js"><link rel="prefetch" href="/assets/js/170.d6634a79.js"><link rel="prefetch" href="/assets/js/171.3ce78d04.js"><link rel="prefetch" href="/assets/js/172.d45a9d16.js"><link rel="prefetch" href="/assets/js/173.b6873137.js"><link rel="prefetch" href="/assets/js/174.ba8df863.js"><link rel="prefetch" href="/assets/js/175.c0c7cd5c.js"><link rel="prefetch" href="/assets/js/176.7a6b456d.js"><link rel="prefetch" href="/assets/js/177.f62f9dd5.js"><link rel="prefetch" href="/assets/js/178.44bf7144.js"><link rel="prefetch" href="/assets/js/179.b299c0d8.js"><link rel="prefetch" href="/assets/js/18.bac87b8c.js"><link rel="prefetch" href="/assets/js/180.f57f1828.js"><link rel="prefetch" href="/assets/js/181.653a09a1.js"><link rel="prefetch" href="/assets/js/182.74eebcfd.js"><link rel="prefetch" href="/assets/js/183.c81eb3e1.js"><link rel="prefetch" href="/assets/js/184.b21bee32.js"><link rel="prefetch" href="/assets/js/185.c937fd43.js"><link rel="prefetch" href="/assets/js/186.f3c20037.js"><link rel="prefetch" href="/assets/js/187.208db2fc.js"><link rel="prefetch" href="/assets/js/188.09495a11.js"><link rel="prefetch" href="/assets/js/189.65fb5a30.js"><link rel="prefetch" href="/assets/js/19.ada8a58c.js"><link rel="prefetch" href="/assets/js/190.5f0ade90.js"><link rel="prefetch" href="/assets/js/191.bd602dcd.js"><link rel="prefetch" href="/assets/js/192.04548051.js"><link rel="prefetch" href="/assets/js/193.06ce97a2.js"><link rel="prefetch" href="/assets/js/194.0f1696b0.js"><link rel="prefetch" href="/assets/js/195.ceb818d3.js"><link rel="prefetch" href="/assets/js/196.0584c81b.js"><link rel="prefetch" href="/assets/js/197.56d7e731.js"><link rel="prefetch" href="/assets/js/198.f5bd5a03.js"><link rel="prefetch" href="/assets/js/199.9247b8b6.js"><link rel="prefetch" href="/assets/js/2.bc566a26.js"><link rel="prefetch" href="/assets/js/20.980d2dbe.js"><link rel="prefetch" href="/assets/js/200.dbb38ed4.js"><link rel="prefetch" href="/assets/js/201.dca2dab8.js"><link rel="prefetch" href="/assets/js/202.a043ddd6.js"><link rel="prefetch" href="/assets/js/203.d95996bc.js"><link rel="prefetch" href="/assets/js/204.b0000288.js"><link rel="prefetch" href="/assets/js/205.bc06cebe.js"><link rel="prefetch" href="/assets/js/206.00017456.js"><link rel="prefetch" href="/assets/js/207.32fa7e24.js"><link rel="prefetch" href="/assets/js/208.4cd53c18.js"><link rel="prefetch" href="/assets/js/21.7a38785d.js"><link rel="prefetch" href="/assets/js/210.fc0cc7de.js"><link rel="prefetch" href="/assets/js/211.61b0dc42.js"><link rel="prefetch" href="/assets/js/212.b011bd1b.js"><link rel="prefetch" href="/assets/js/213.306a65bf.js"><link rel="prefetch" href="/assets/js/214.d8ba2635.js"><link rel="prefetch" href="/assets/js/215.c3d51219.js"><link rel="prefetch" href="/assets/js/216.260126f3.js"><link rel="prefetch" href="/assets/js/217.0f49295f.js"><link rel="prefetch" href="/assets/js/218.d86b691e.js"><link rel="prefetch" href="/assets/js/219.c7fdeb2f.js"><link rel="prefetch" href="/assets/js/22.aa5d8a5d.js"><link rel="prefetch" href="/assets/js/220.c9a36e7a.js"><link rel="prefetch" href="/assets/js/221.238bd3aa.js"><link rel="prefetch" href="/assets/js/222.02b67dc5.js"><link rel="prefetch" href="/assets/js/223.36387e03.js"><link rel="prefetch" href="/assets/js/224.d5f13731.js"><link rel="prefetch" href="/assets/js/225.a14b8df3.js"><link rel="prefetch" href="/assets/js/226.108e37eb.js"><link rel="prefetch" href="/assets/js/227.a19a99d2.js"><link rel="prefetch" href="/assets/js/228.5bd9926b.js"><link rel="prefetch" href="/assets/js/229.96886fd1.js"><link rel="prefetch" href="/assets/js/23.9fc70572.js"><link rel="prefetch" href="/assets/js/230.5b6fadf1.js"><link rel="prefetch" href="/assets/js/231.f54925ec.js"><link rel="prefetch" href="/assets/js/232.62d049b7.js"><link rel="prefetch" href="/assets/js/233.fd2d8b77.js"><link rel="prefetch" href="/assets/js/234.5623b4ac.js"><link rel="prefetch" href="/assets/js/235.0a33d74c.js"><link rel="prefetch" href="/assets/js/236.ad182da4.js"><link rel="prefetch" href="/assets/js/237.aafee418.js"><link rel="prefetch" href="/assets/js/238.b50c1d89.js"><link rel="prefetch" href="/assets/js/239.09bb7df7.js"><link rel="prefetch" href="/assets/js/24.e4e1e922.js"><link rel="prefetch" href="/assets/js/240.6b141ab4.js"><link rel="prefetch" href="/assets/js/241.1a9c6eed.js"><link rel="prefetch" href="/assets/js/242.031c8aa8.js"><link rel="prefetch" href="/assets/js/25.a328c9f8.js"><link rel="prefetch" href="/assets/js/26.2293b429.js"><link rel="prefetch" href="/assets/js/27.305fb1a5.js"><link rel="prefetch" href="/assets/js/28.df7b03a9.js"><link rel="prefetch" href="/assets/js/29.6096fb93.js"><link rel="prefetch" href="/assets/js/30.95014907.js"><link rel="prefetch" href="/assets/js/31.2de7efa6.js"><link rel="prefetch" href="/assets/js/32.d2e3a33a.js"><link rel="prefetch" href="/assets/js/33.94d8f214.js"><link rel="prefetch" href="/assets/js/34.bcc38932.js"><link rel="prefetch" href="/assets/js/35.df1ad433.js"><link rel="prefetch" href="/assets/js/36.c1f48505.js"><link rel="prefetch" href="/assets/js/37.8a1bba42.js"><link rel="prefetch" href="/assets/js/38.2fed5195.js"><link rel="prefetch" href="/assets/js/39.1dbf0da9.js"><link rel="prefetch" href="/assets/js/40.1e72c882.js"><link rel="prefetch" href="/assets/js/41.a3376d60.js"><link rel="prefetch" href="/assets/js/42.eb1159e8.js"><link rel="prefetch" href="/assets/js/43.7b6e8276.js"><link rel="prefetch" href="/assets/js/44.86116c1f.js"><link rel="prefetch" href="/assets/js/45.7758b554.js"><link rel="prefetch" href="/assets/js/46.e6f82c16.js"><link rel="prefetch" href="/assets/js/47.03711da3.js"><link rel="prefetch" href="/assets/js/48.cc4cf762.js"><link rel="prefetch" href="/assets/js/49.a08ffaab.js"><link rel="prefetch" href="/assets/js/5.d7170a20.js"><link rel="prefetch" href="/assets/js/50.3fc58fc7.js"><link rel="prefetch" href="/assets/js/51.b3f0b709.js"><link rel="prefetch" href="/assets/js/52.1a0c4fb5.js"><link rel="prefetch" href="/assets/js/53.14a44c5e.js"><link rel="prefetch" href="/assets/js/54.7fbc790f.js"><link rel="prefetch" href="/assets/js/55.ed6e65c4.js"><link rel="prefetch" href="/assets/js/56.41585847.js"><link rel="prefetch" href="/assets/js/57.2a10bf1a.js"><link rel="prefetch" href="/assets/js/58.a9b7ff4d.js"><link rel="prefetch" href="/assets/js/59.c5405038.js"><link rel="prefetch" href="/assets/js/6.bcfd2931.js"><link rel="prefetch" href="/assets/js/60.3587de2e.js"><link rel="prefetch" href="/assets/js/61.5631c438.js"><link rel="prefetch" href="/assets/js/62.2b6f5f4a.js"><link rel="prefetch" href="/assets/js/63.9a7cdc8a.js"><link rel="prefetch" href="/assets/js/64.bd0de10d.js"><link rel="prefetch" href="/assets/js/65.0ebb90cc.js"><link rel="prefetch" href="/assets/js/66.97ac1991.js"><link rel="prefetch" href="/assets/js/67.91683dff.js"><link rel="prefetch" href="/assets/js/68.bf757e09.js"><link rel="prefetch" href="/assets/js/69.b5d7f45e.js"><link rel="prefetch" href="/assets/js/7.1855d705.js"><link rel="prefetch" href="/assets/js/70.ec137683.js"><link rel="prefetch" href="/assets/js/71.db01b515.js"><link rel="prefetch" href="/assets/js/72.ecda3334.js"><link rel="prefetch" href="/assets/js/73.e372f374.js"><link rel="prefetch" href="/assets/js/74.56c3c3e8.js"><link rel="prefetch" href="/assets/js/75.a4da3784.js"><link rel="prefetch" href="/assets/js/76.c282fff6.js"><link rel="prefetch" href="/assets/js/77.36cfabde.js"><link rel="prefetch" href="/assets/js/78.d2e36480.js"><link rel="prefetch" href="/assets/js/79.47341e68.js"><link rel="prefetch" href="/assets/js/80.63b64864.js"><link rel="prefetch" href="/assets/js/81.c6335f08.js"><link rel="prefetch" href="/assets/js/82.795fd3e4.js"><link rel="prefetch" href="/assets/js/83.aa17401b.js"><link rel="prefetch" href="/assets/js/84.ca161668.js"><link rel="prefetch" href="/assets/js/85.2bc678f0.js"><link rel="prefetch" href="/assets/js/86.99147b69.js"><link rel="prefetch" href="/assets/js/87.f463e46a.js"><link rel="prefetch" href="/assets/js/88.ce3ac700.js"><link rel="prefetch" href="/assets/js/89.bf88052b.js"><link rel="prefetch" href="/assets/js/90.cd696272.js"><link rel="prefetch" href="/assets/js/91.c701f61a.js"><link rel="prefetch" href="/assets/js/92.39ef4e27.js"><link rel="prefetch" href="/assets/js/93.169f48b8.js"><link rel="prefetch" href="/assets/js/94.0edfaf62.js"><link rel="prefetch" href="/assets/js/95.bc11c1ce.js"><link rel="prefetch" href="/assets/js/96.63e00e6c.js"><link rel="prefetch" href="/assets/js/97.f782fc0f.js"><link rel="prefetch" href="/assets/js/98.f467df64.js"><link rel="prefetch" href="/assets/js/99.7e28dbf5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.01254cd7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2b7af6e1.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/code.gif" alt="Huidong Blogs" class="logo"> <span class="site-name can-hide">Huidong Blogs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><!----> <span class="title" style="display:;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/javase/" class="nav-link">JavaSE</a></li><li class="dropdown-item"><!----> <a href="/pages/juc/" class="nav-link">并发编程</a></li><li class="dropdown-item"><!----> <a href="/pages/javaweb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/pages/newversion/" class="nav-link">版本新特性</a></li><li class="dropdown-item"><!----> <a href="/pages/maven/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/springmvc/" class="nav-link">SpringMvc</a></li><li class="dropdown-item"><!----> <a href="/pages/mybatis/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/pages/springcloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/dubbo/" class="nav-link">Dubbo</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务架构" class="dropdown-title"><!----> <span class="title" style="display:;">微服务架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/architecture/" class="nav-link">架构演进</a></li><li class="dropdown-item"><!----> <a href="/pages/tx/" class="nav-link">分布式事务</a></li><li class="dropdown-item"><!----> <a href="/pages/designpattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/pages/ddd/" class="nav-link">领域驱动设计</a></li><li class="dropdown-item"><!----> <a href="/pages/89d56d76-7636-3ed6-83c6-310859c07e93/" class="nav-link">分布式锁</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/kafka/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/pages/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/pages/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/pages/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/elasticsearch/" class="nav-link">ElasticSearch</a></li><li class="dropdown-item"><!----> <a href="/pages/zookeeper/" class="nav-link">Zookeeper</a></li><li class="dropdown-item"><!----> <a href="/pages/jvm/" class="nav-link">JVM</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云计算" class="dropdown-title"><!----> <span class="title" style="display:;">云计算</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/docker/" class="nav-link">Docker</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/spark/" class="nav-link">Spark</a></li><li class="dropdown-item"><!----> <a href="/pages/flink/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/pages/hadoop.html" class="nav-link">Hadoop</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AboutMe" class="dropdown-title"><!----> <span class="title" style="display:;">AboutMe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/aboutme/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/pages/a2a9d5e6-b580-3ee0-b2c2-5b1557852fd5/" class="nav-link">项目经验</a></li><li class="dropdown-item"><!----> <a href="/pages/457c4495-1768-3af4-bc65-112ed5748187/" class="nav-link">PPT</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/code.gif"> <div class="blogger-info"><h3>huidong.yin</h3> <span>花花世界迷人眼，没有实力别赛脸。</span></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><!----> <span class="title" style="display:;">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/javase/" class="nav-link">JavaSE</a></li><li class="dropdown-item"><!----> <a href="/pages/juc/" class="nav-link">并发编程</a></li><li class="dropdown-item"><!----> <a href="/pages/javaweb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/pages/newversion/" class="nav-link">版本新特性</a></li><li class="dropdown-item"><!----> <a href="/pages/maven/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><!----> <span class="title" style="display:;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/springmvc/" class="nav-link">SpringMvc</a></li><li class="dropdown-item"><!----> <a href="/pages/mybatis/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/pages/springcloud/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/dubbo/" class="nav-link">Dubbo</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务架构" class="dropdown-title"><!----> <span class="title" style="display:;">微服务架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/architecture/" class="nav-link">架构演进</a></li><li class="dropdown-item"><!----> <a href="/pages/tx/" class="nav-link">分布式事务</a></li><li class="dropdown-item"><!----> <a href="/pages/designpattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/pages/ddd/" class="nav-link">领域驱动设计</a></li><li class="dropdown-item"><!----> <a href="/pages/89d56d76-7636-3ed6-83c6-310859c07e93/" class="nav-link">分布式锁</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/kafka/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/pages/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-item"><!----> <a href="/pages/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-item"><!----> <a href="/pages/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/elasticsearch/" class="nav-link">ElasticSearch</a></li><li class="dropdown-item"><!----> <a href="/pages/zookeeper/" class="nav-link">Zookeeper</a></li><li class="dropdown-item"><!----> <a href="/pages/jvm/" class="nav-link">JVM</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云计算" class="dropdown-title"><!----> <span class="title" style="display:;">云计算</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/docker/" class="nav-link">Docker</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/spark/" class="nav-link">Spark</a></li><li class="dropdown-item"><!----> <a href="/pages/flink/" class="nav-link">Flink</a></li><li class="dropdown-item"><!----> <a href="/pages/hadoop.html" class="nav-link">Hadoop</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AboutMe" class="dropdown-title"><!----> <span class="title" style="display:;">AboutMe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/aboutme/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/pages/a2a9d5e6-b580-3ee0-b2c2-5b1557852fd5/" class="nav-link">项目经验</a></li><li class="dropdown-item"><!----> <a href="/pages/457c4495-1768-3af4-bc65-112ed5748187/" class="nav-link">PPT</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/docker/" class="sidebar-link">基础概念-Docker简介</a></li><li><a href="/pages/afa8b4e0-ac6d-3865-91e7-75798d1d1804/" class="sidebar-link">基础概念-Docker核心组成</a></li><li><a href="/pages/b67d9ea2-634a-3d33-9691-fdbf53d9da13/" class="sidebar-link">安装运行-搭建Docker运行环境</a></li><li><a href="/pages/1f66d455-c344-37d9-b133-521849466f14/" class="sidebar-link">安装运行-使用Docker快速搭建环境</a></li><li><a href="/pages/e042060e-fdb2-3ec9-b8f5-81e2a8873776/" class="sidebar-link">使用容器-镜像与容器</a></li><li><a href="/pages/e8547d25-57b0-3379-aed3-f597817c1400/" class="sidebar-link">使用容器-从镜像仓库获得镜像</a></li><li><a href="/pages/bef32fca-5662-35cc-b169-71c34f64b6f4/" class="sidebar-link">使用容器-运行和管理容器</a></li><li><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/" aria-current="page" class="active sidebar-link">使用容器-配置网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_1-容器网络" class="sidebar-link">1.容器网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_1-1-bridge网络协议" class="sidebar-link">1.1 Bridge网络协议</a></li><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_1-2-host网络协议" class="sidebar-link">1.2 Host网络协议</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_2-管理网络" class="sidebar-link">2.管理网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_2-1-创建网络" class="sidebar-link">2.1 创建网络</a></li><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_2-2-连接网络" class="sidebar-link">2.2 连接网络</a></li><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_2-3-断开网络" class="sidebar-link">2.3 断开网络</a></li><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_2-4-移除网络" class="sidebar-link">2.4 移除网络</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_3-容器互联" class="sidebar-link">3.容器互联</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_3-1-docker-dns" class="sidebar-link">3.1 Docker DNS</a></li><li class="sidebar-sub-header level3"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_3-2-暴露端口" class="sidebar-link">3.2 暴露端口</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0bd962fb-3c61-3582-a39f-f5aa78aaf6df/#_4-端口映射" class="sidebar-link">4.端口映射</a></li></ul></li><li><a href="/pages/fcaca3ea-a1a2-3302-941b-263154dd23eb/" class="sidebar-link">使用容器-管理和存储数据</a></li><li><a href="/pages/38d05174-1c3a-3423-9aae-beaec17d3d9b/" class="sidebar-link">镜像操作-保存和共享镜像</a></li><li><a href="/pages/740e6e9d-b300-3766-8c50-4fa39e5f8b58/" class="sidebar-link">镜像操作-DockerFile</a></li><li><a href="/pages/299ec4fe-1e43-31a4-af2e-0ab7258a19ec/" class="sidebar-link">应用组合-DockerCompose</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E4%BA%91%E8%AE%A1%E7%AE%97" title="分类" data-v-06225672>云计算</a></li><li data-v-06225672><a href="/categories/?category=Docker" title="分类" data-v-06225672>Docker</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://huidongyin.github.io" target="_blank" title="作者" class="beLink" data-v-06225672>huidong.yin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-01-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">使用容器-配置网络<!----></h1>  <div class="theme-vdoing-content content__default"><p>Docker 作为集群部署的利器，在网络支持上也下了许多功夫。功能丰富和强大，并不代表使用复杂，在 Docker 的封装下，我们依然可以通过命令和参数轻松的为容器制定不同的网络方案。在这一节中，我们就来了解 Docker 的网络部分。</p> <hr> <h2 id="_1-容器网络"><a href="#_1-容器网络" class="header-anchor">#</a> 1.容器网络</h2> <p>在之前介绍 Docker 核心组成的时候，我们已经简单谈到了容器网络的相关知识。容器网络实质上也是由 Docker 为应用程序所创造的虚拟环境的一部分，它能让应用从宿主机操作系统的网络环境中独立出来，形成容器自有的网络设备、IP 协议栈、端口套接字、IP 路由表、防火墙等等与网络相关的模块。</p> <p><img src="https://raw.githubusercontent.com/huidongyin/DrawingBed/main/Docker/202401092119814.webp" alt=""></p> <p>还是回归上面这幅之前展示过的关于 Docker 网络的图片。在 Docker 网络中，有三个比较核心的概念，也就是：<strong>沙盒</strong> ( Sandbox )、<strong>网络</strong> ( Network )、<strong>端点</strong> ( Endpoint )。</p> <ul><li><strong>沙盒</strong>提供了容器的虚拟网络栈，也就是之前所提到的端口套接字、IP 路由表、防火墙等的内容。其实现隔离了容器网络与宿主机网络，形成了完全独立的容器网络环境。</li> <li><strong>网络</strong>可以理解为 Docker 内部的虚拟子网，网络内的参与者相互可见并能够进行通讯。Docker 的这种虚拟网络也是于宿主机网络存在隔离关系的，其目的主要是形成容器间的安全通讯环境。</li> <li><strong>端点</strong>是位于容器或网络隔离墙之上的洞，其主要目的是形成一个可以控制的突破封闭的网络环境的出入口。当容器的端点与网络的端点形成配对后，就如同在这两者之间搭建了桥梁，便能够进行数据传输了。</li></ul> <p>这三者形成了 Docker 网络的核心模型，也就是<strong>容器网络模型</strong> ( Container Network Model )。</p> <p>容器网络模型为容器引擎提供了一套标准的网络对接范式，而在 Docker 中，实现这套范式的是 Docker 所封装的 <code>libnetwork</code> 模块。</p> <p>而对于网络的具体实现，在 Docker 的发展过程中也逐渐抽象，形成了统一的抽象定义。进而通过这些抽象定义，便可以对 Docker 网络的实现方式进行不同的变化。</p> <p><img src="https://raw.githubusercontent.com/huidongyin/DrawingBed/main/Docker/202401092120009.webp" alt=""></p> <p>目前 Docker 官方为我们提供了五种 Docker 网络驱动，分别是：<strong>Bridge Driver</strong>、<strong>Host Driver</strong>、<strong>Overlay Driver</strong>、<strong>MacLan Driver</strong>、<strong>None Driver</strong>。</p> <p>其中，Bridge 网络是 Docker 容器的默认网络驱动，简而言之其就是通过网桥来实现网络通讯 ( 网桥网络的实现可以基于硬件，也可以基于软件 )。而 Overlay 网络是借助 Docker 集群模块 Docker Swarm 来搭建的跨 Docker Daemon 网络，我们可以通过它搭建跨物理主机的虚拟网络，进而让不同物理机中运行的容器感知不到多个物理机的存在。</p> <hr> <h3 id="_1-1-bridge网络协议"><a href="#_1-1-bridge网络协议" class="header-anchor">#</a> 1.1 Bridge网络协议</h3> <p>在该模式中，Docker 守护进程创建了一个虚拟以太网桥 <code>docker0</code>，新建的容器会自动桥接到这个接口，附加在其上的任何网卡之间都能自动转发数据包。</p> <p>默认情况下，守护进程会创建一对对等虚拟设备接口 <code>veth pair</code>，将其中一个接口设置为容器的 <code>eth0</code> 接口（容器的网卡），另一个接口放置在宿主机的命名空间中，以类似 <code>vethxxx</code> 这样的名字命名，从而将宿主机上的所有容器都连接到这个内部网络上。</p> <p>同时，守护进程还会从网桥 <code>docker0</code> 的私有地址空间中分配一个 IP 地址和子网给该容器，并设置 <code>docker0</code> 的 IP 地址为容器的默认网关。</p> <p>关于 bridge 网络模式的使用，只需要在创建容器时通过参数 <code>--net bridge</code> 或者 <code>--network bridge</code> 指定即可，当然这也是创建容器默认使用的网络模式，也就是说这个参数是可以省略的。</p> <p><img src="https://raw.githubusercontent.com/huidongyin/DrawingBed/main/Docker/202401092120889.png" alt=""></p> <p>Bridge 桥接模式的实现步骤主要如下：</p> <ul><li>Docker Daemon 利用 <code>veth pair</code> 技术，在宿主机上创建一对对等虚拟网络接口设备，假设为 <code>veth0</code> 和 <code>veth1</code>。而 <code>veth pair</code> 技术的特性可以保证无论哪一个 <code>veth</code> 接收到网络报文，都会将报文传输给另一方。</li> <li>Docker Daemon 将 <code>veth0</code> 附加到 Docker Daemon 创建的 <code>docker0</code> 网桥上。保证宿主机的网络报文可以发往 <code>veth0</code>；</li> <li>Docker Daemon 将 <code>veth1</code> 添加到 Docker Container 所属的 <code>namespace</code> 下，并被改名为  <code>eth0</code>。如此一来，宿主机的网络报文若发往 <code>veth0</code>，则立即会被 Container 的 <code>eth0</code> 接收，实现宿主机到 Docker  Container 网络的联通性；同时，也保证 Docker Container 单独使用 <code>eth0</code>，实现容器网络环境的隔离性。</li></ul> <hr> <h3 id="_1-2-host网络协议"><a href="#_1-2-host网络协议" class="header-anchor">#</a> 1.2 Host网络协议</h3> <ul><li>host 网络模式需要在创建容器时通过参数 <code>--net host</code> 或者 <code>--network host</code> 指定；</li> <li>采用 host 网络模式的 Docker Container，可以直接使用宿主机的 IP 地址与外界进行通信，若宿主机的 <code>eth0</code> 是一个公有 IP，那么容器也拥有这个公有 IP。同时容器内服务的端口也可以使用宿主机的端口，无需额外进行 NAT 转换；</li> <li>host 网络模式可以让容器共享宿主机网络栈，这样的好处是外部主机与容器直接通信，但是容器的网络缺少隔离性。</li></ul> <p><img src="https://raw.githubusercontent.com/huidongyin/DrawingBed/main/Docker/202401092121126.png" alt=""></p> <hr> <h2 id="_2-管理网络"><a href="#_2-管理网络" class="header-anchor">#</a> 2.管理网络</h2> <p>容器能够互相连接的前提是两者同处于一个网络中 ( 这里的网络是指容器网络模型中的网络 )。这个限制很好理解，网络这个概念我们可以理解为 Docker 所虚拟的子网，而容器网络沙盒可以看做是虚拟的主机，只有当多个主机在同一子网里时，才能互相看到并进行网络数据交换。</p> <p>当我们启动 Docker 服务时，它会为我们创建一个默认的 bridge 网络，而我们创建的容器在不专门指定网络的情况下都会连接到这个网络上。</p> <p>我们通过 <code>docker inspect</code> 命令查看容器，可以在 Network 部分看到容器网络相关的信息。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">docker</span> inspect mysql
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
// <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
        <span class="token string">&quot;NetworkSettings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
// <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
            <span class="token string">&quot;Networks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;bridge&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;IPAMConfig&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Links&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Aliases&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;NetworkID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bc14eb1da66b67c7d155d6c78cb5389d4ffa6c719c8be3280628b7b54617441b&quot;</span>,
                    <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1e201db6858341d326be4510971b2f81f0f85ebd09b9b168e1df61bab18a6f22&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.1&quot;</span>,
                    <span class="token string">&quot;IPAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.2&quot;</span>,
                    <span class="token string">&quot;IPPrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">16</span>,
                    <span class="token string">&quot;IPv6Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
                    <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:11:00:02&quot;</span>,
                    <span class="token string">&quot;DriverOpts&quot;</span><span class="token builtin class-name">:</span> null
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
// <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
        <span class="token punctuation">}</span>
// <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>这里我们能够看到 mysql 容器在 bridge 网络中所分配的 IP 地址，其自身的端点、Mac 地址，bridge 网络的网关地址等信息。</p> <p>Docker 默认创建的这个 bridge 网络是非常重要的，理由自然是在没有明确指定容器网络时，容器都会连接到这个网络中。</p> <hr> <h3 id="_2-1-创建网络"><a href="#_2-1-创建网络" class="header-anchor">#</a> 2.1 创建网络</h3> <p>在 Docker 里，我们也能够创建网络，形成自定义虚拟子网的目的。</p> <p>docker CLI 里与网络相关的命令都以 <code>docker network</code> 开头，其中创建网络的命令是 <code>docker network create</code>。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> network create <span class="token parameter variable">-d</span> bridge huidong-test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过 <code>-d</code> 选项我们可以为新的网络指定驱动的类型，其值可以是刚才我们所提及的 bridge、host、overlay、maclan、none，也可以是其他网络驱动插件所定义的类型。这里我们使用的是 Bridge Driver ( 当我们不指定网络驱动时，Docker 也会默认采用 Bridge Driver 作为网络驱动 )。</p> <p>通过 <code>docker network ls</code> 或是 <code>docker network list</code> 可以查看 Docker 中已经存在的网络。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:26:52
$ <span class="token function">docker</span> network <span class="token function">ls</span>                           
NETWORK ID     NAME            DRIVER    SCOPE
0ff92e04b065   bridge          bridge    <span class="token builtin class-name">local</span>
99a8e0b31c07   <span class="token function">host</span>            <span class="token function">host</span>      <span class="token builtin class-name">local</span>
0d7425e80de8   huidong-test    bridge    <span class="token builtin class-name">local</span>
6ef08a4c7508   kafka-net       bridge    <span class="token builtin class-name">local</span>
c0b280bf77c6   none            null      <span class="token builtin class-name">local</span>
f4708618126a   zookeeper-net   bridge    <span class="token builtin class-name">local</span>
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:27:24
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>之后在我们创建容器时，可以通过 <code>--network</code> 来指定容器所加入的网络，一旦这个参数被指定，容器便不会默认加入到 bridge 这个网络中了 ( 但是仍然可以通过 <code>--network bridge</code> 让其加入 )。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:29:07
$ <span class="token function">docker</span> run <span class="token parameter variable">--network</span> huidong-test <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-d</span> nginx
476cc27d3425ccccdbf7441662279f8ee45431172b6c3dfa0ac651bfb0831706
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:30:25
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们通过 <code>docker inspect</code> 观察一下此时的容器网络。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:30:25
$ <span class="token function">docker</span> inspect nginx                                   
<span class="token punctuation">[</span>
//<span class="token punctuation">..</span>.
            <span class="token string">&quot;Networks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;huidong-test&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;IPAMConfig&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Links&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Aliases&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;476cc27d3425&quot;</span>
                    <span class="token punctuation">]</span>,
                    <span class="token string">&quot;NetworkID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0d7425e80de8430197411e2b05d8551457df54c056ef524faf6ca64fa0525909&quot;</span>,
                    <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1d4851c22c41baf1ecf0ed12028c1dad31c65cc5640ab14b0dae28bba295dce7&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.20.0.1&quot;</span>,
                    <span class="token string">&quot;IPAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.20.0.2&quot;</span>,
                    <span class="token string">&quot;IPPrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">16</span>,
                    <span class="token string">&quot;IPv6Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
                    <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:14:00:02&quot;</span>,
                    <span class="token string">&quot;DriverOpts&quot;</span><span class="token builtin class-name">:</span> null
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:31:00
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>可以看到，容器所加入网络已经变成了 <code>huidong-test</code> 这个网络了。</p> <hr> <h3 id="_2-2-连接网络"><a href="#_2-2-连接网络" class="header-anchor">#</a> 2.2 连接网络</h3> <p>通过 <code>docker network connect 网络名称 容器名称</code> 为容器连接新的网络模式。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:43:53
$ <span class="token function">docker</span> network connect huidong-test-2 nginx    
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:44:24
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>通过 <code>docker inspect 容器名称|ID</code> 再次查看容器的网络信息，多增加了默认的 <code>huidong-test-2</code>。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:44:24
$ <span class="token function">docker</span> inspect nginx                       
<span class="token punctuation">[</span>
//<span class="token punctuation">..</span>.
            <span class="token string">&quot;Networks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;huidong-test&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    //<span class="token punctuation">..</span>.
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;huidong-test-2&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    //<span class="token punctuation">..</span>.
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:44:32
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr> <h3 id="_2-3-断开网络"><a href="#_2-3-断开网络" class="header-anchor">#</a> 2.3 断开网络</h3> <p>通过 <code>docker network disconnect 网络名称 容器名称</code> 命令断开网络。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:44:32
$ <span class="token function">docker</span> network disconnect huidong-test-2 nginx
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:46:40
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>通过 <code>docker inspect 容器名称|ID</code> 再次查看容器的网络信息，发现只剩下 <code>huidong-test</code>。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:46:40
$ <span class="token function">docker</span> inspect nginx                          
<span class="token punctuation">[</span>
//<span class="token punctuation">..</span>.
            <span class="token string">&quot;Networks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;huidong-test&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
//<span class="token punctuation">..</span>.
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:47:16
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-4-移除网络"><a href="#_2-4-移除网络" class="header-anchor">#</a> 2.4 移除网络</h3> <p>可以通过 <code>docker network rm 网络名称</code> 命令移除自定义网络模式，网络模式移除成功会返回网络模式名称。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:49:15
$ <span class="token function">docker</span> network <span class="token function">rm</span> huidong-test-2 
huidong-test-2
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:49:17
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>如果通过某个自定义网络模式创建了容器，则该网络模式无法删除。</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:49:17
$ <span class="token function">docker</span> network <span class="token function">rm</span> huidong-test   
Error response from daemon: error <span class="token keyword">while</span> removing network: network huidong-test <span class="token function">id</span> 0d7425e80de8430197411e2b05d8551457df54c056ef524faf6ca64fa0525909 has active endpoints
👨 huidong 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">23</span>:49:40
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr> <h2 id="_3-容器互联"><a href="#_3-容器互联" class="header-anchor">#</a> 3.容器互联</h2> <h3 id="_3-1-docker-dns"><a href="#_3-1-docker-dns" class="header-anchor">#</a> 3.1 Docker DNS</h3> <p>首先明确一点，<strong>容器之间要互相通信，必须要有属于同一个网络的网卡</strong>。</p> <p>先创建两个基于默认的 <code>bridge</code> 网络模式的容器。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> default_bbox01 busybox
<span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> default_bbox02 busybox
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过 <code>docker network inspect bridge</code> 查看两容器的具体 IP 信息。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">15</span>:54:50
$ <span class="token function">docker</span> network inspect bridge
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
//<span class="token punctuation">..</span>.
        <span class="token string">&quot;Containers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>

            <span class="token string">&quot;33d2aaa177cbf820edacbe2fb200d6d6ae88d0ae7c64a54029795ff683baca95&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default_bbox02&quot;</span>,
                <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;70cc2381e67ec52ad52c2904a5abdd27c117ae7f36f4ad79a8dd2c8394464954&quot;</span>,
                <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:11:00:07&quot;</span>,
                <span class="token string">&quot;IPv4Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.7/16&quot;</span>,
                <span class="token string">&quot;IPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;caa59faf6906f6b0b11a8385c7931460858604657c5f8de1d3ab638e91024a9b&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default_bbox01&quot;</span>,
                <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;de9afabc43c32e4e9239abf4261ae64f245a5c12aaf62d425b3eaa97af137af7&quot;</span>,
                <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:11:00:06&quot;</span>,
                <span class="token string">&quot;IPv4Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.6/16&quot;</span>,
                <span class="token string">&quot;IPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
//<span class="token punctuation">..</span>.
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">15</span>:54:59
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>然后测试两容器间是否可以进行网络通信。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">15</span>:54:59
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> default_bbox01 <span class="token function">ping</span> <span class="token number">172.17</span>.0.7      
PING <span class="token number">172.17</span>.0.7 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.7<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.7: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">1.289</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.7: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.193</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.7: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.142</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.7: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.361</span> ms
^C
--- <span class="token number">172.17</span>.0.7 <span class="token function">ping</span> statistics ---
<span class="token number">4</span> packets transmitted, <span class="token number">4</span> packets received, <span class="token number">0</span>% packet loss
round-trip min/avg/max <span class="token operator">=</span> <span class="token number">0.142</span>/0.496/1.289 ms
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">15</span>:57:30
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>经过测试，从结果得知两个属于同一个网络的容器是可以进行网络通信的，但是 IP 地址可能是不固定的，有被更改的情况发生，那容器内所有通信的 IP 地址也需要进行更改，能否使用容器名称进行网络通信？继续测试。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">15</span>:57:30
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> default_bbox01 <span class="token function">ping</span> default_bbox02
ping: bad address <span class="token string">'default_bbox02'</span>
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">15</span>:58:39
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>经过测试，从结果得知使用容器进行网络通信是不行的，那怎么实现这个功能呢？</p> <p>从 Docker 1.10 版本开始，<code>docker daemon</code> 实现了一个内嵌的 <strong>DNS SERVER</strong>，使容器可以直接通过容器名称通信。方法很简单，只要在创建容器时使用 <code>--name</code> 为容器命名即可。</p> <p>但是使用 <strong>Docker DNS</strong> 有个限制：只能在 <code>user-defined</code> 网络中使用。也就是说，默认的 bridge 网络是无法使用 DNS 的，所以就需要自定义网络。</p> <p>先基于 bridge 网络模式创建自定义网络 <code>huidong-test-aaa</code>，然后创建两个基于自定义网络模式的容器。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:00:02
$ <span class="token function">docker</span> network create huidong-test-aaa            
e5994135175b7de7b1f83a2bea4d6c8ebc62e4da9c1a6aa3a8ddea4e4d9053d0
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:00:16
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> custom_bbox01 <span class="token parameter variable">--net</span> huidong-test-aaa busybox
<span class="token function">docker</span> run <span class="token parameter variable">-di</span> <span class="token parameter variable">--name</span> custom_bbox02 <span class="token parameter variable">--net</span> huidong-test-aaa busybox
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后测试两容器间是否可以进行网络通信，分别使用具体 IP 和容器名称进行网络通信。</p> <p>先使用 <code>docker inspect</code> 命令查看这两个容器的IP。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>        <span class="token punctuation">{</span>
            <span class="token property">&quot;76c84121d9fd8378f8210ca706f9da1804f1d34d2b1cd4588b35cec141f835ec&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom_bbox02&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;EndpointID&quot;</span><span class="token operator">:</span> <span class="token string">&quot;878e1c80e7fe463cd73363cb8609b334e71c78f039c09ba8a66b87a21ea90df1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;MacAddress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;02:42:ac:14:00:03&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;IPv4Address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;172.20.0.3/16&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;IPv6Address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;b674918ab956e1bb363b790ec04ee85a9cdef918e71c890bf11493b41df2acbc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom_bbox01&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;EndpointID&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e8ca34dd08760e46275eb4fe8614a283f51bd66eb342a9c6d0eb1bbdfbb0f0c1&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;MacAddress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;02:42:ac:14:00:02&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;IPv4Address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;172.20.0.2/16&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;IPv6Address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>使用IP ping 。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:04:32
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> custom_bbox01 <span class="token function">ping</span> <span class="token number">172.20</span>.0.3
PING <span class="token number">172.20</span>.0.3 <span class="token punctuation">(</span><span class="token number">172.20</span>.0.3<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">1.271</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.239</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.337</span> ms
^C
--- <span class="token number">172.20</span>.0.3 <span class="token function">ping</span> statistics ---
<span class="token number">3</span> packets transmitted, <span class="token number">3</span> packets received, <span class="token number">0</span>% packet loss
round-trip min/avg/max <span class="token operator">=</span> <span class="token number">0.239</span>/0.615/1.271 ms
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:04:46
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用容器名ping。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:04:46
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> custom_bbox01 <span class="token function">ping</span> custom_bbox02          
PING custom_bbox02 <span class="token punctuation">(</span><span class="token number">172.20</span>.0.3<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.346</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.310</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.526</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.429</span> ms
^C
--- custom_bbox02 <span class="token function">ping</span> statistics ---
<span class="token number">14</span> packets transmitted, <span class="token number">14</span> packets received, <span class="token number">0</span>% packet loss
round-trip min/avg/max <span class="token operator">=</span> <span class="token number">0.193</span>/0.377/0.526 ms
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:05:40
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>经过测试，从结果得知两个属于同一个自定义网络的容器是可以进行网络通信的，并且可以使用容器名称进行网络通信。</p> <p>那如果此时希望 bridge 网络下的容器可以和 <code>huidong-test-aaa</code> 网络下的容器进行网络又该如何操作？其实答案也非常简单：让 bridge 网络下的容器连接至新的 <code>huidong-test-aaa</code> 网络即可。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:07:38
$ <span class="token function">docker</span> network connect huidong-test-aaa default_bbox01
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:07:40
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:07:40
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> custom_bbox01 <span class="token function">ping</span> default_bbox01     
PING default_bbox01 <span class="token punctuation">(</span><span class="token number">172.20</span>.0.4<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.4: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.984</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.4: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.874</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.20</span>.0.4: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.578</span> ms
^C
--- default_bbox01 <span class="token function">ping</span> statistics ---
<span class="token number">3</span> packets transmitted, <span class="token number">3</span> packets received, <span class="token number">0</span>% packet loss
round-trip min/avg/max <span class="token operator">=</span> <span class="token number">0.578</span>/0.812/0.984 ms
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">16</span>:08:29
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>经过测试，也是可以通的。</p> <hr> <h3 id="_3-2-暴露端口"><a href="#_3-2-暴露端口" class="header-anchor">#</a> 3.2 暴露端口</h3> <p>虽然容器间的网络打通了，但并不意味着我们可以任意访问被连接容器中的任何服务。Docker 为容器网络增加了一套安全机制，只有容器自身允许的端口，才能被其他容器所访问。</p> <p>这个容器自我标记端口可被访问的过程，我们通常称为暴露端口。我们在 <code>docker ps</code> 的结果中可以看到容器暴露给其他容器访问的端口。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">13</span>:39:25
$ <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID   IMAGE                       COMMAND                   CREATED        STATUS                 PORTS                                                  NAMES
110b177c9f14   wurstmeister/kafka:latest   <span class="token string">&quot;start-kafka.sh&quot;</span>          <span class="token number">27</span> hours ago   Up <span class="token number">27</span> hours            <span class="token number">0.0</span>.0.0:9094-<span class="token operator">&gt;</span><span class="token number">9092</span>/tcp                                 kafka2
859da7d4bc67   wurstmeister/kafka:latest   <span class="token string">&quot;start-kafka.sh&quot;</span>          <span class="token number">27</span> hours ago   Up <span class="token number">27</span> hours            <span class="token number">0.0</span>.0.0:9093-<span class="token operator">&gt;</span><span class="token number">9092</span>/tcp                                 kafka1
881b429e9378   wurstmeister/kafka:latest   <span class="token string">&quot;start-kafka.sh&quot;</span>          <span class="token number">27</span> hours ago   Up <span class="token number">27</span> hours            <span class="token number">0.0</span>.0.0:9092-<span class="token operator">&gt;</span><span class="token number">9092</span>/tcp                                 kafka0
7b3654b7cdd4   zookeeper:3.7.1             <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">3</span> days ago     Up <span class="token number">3</span> days              <span class="token number">2888</span>/tcp, <span class="token number">3888</span>/tcp, <span class="token number">8080</span>/tcp, <span class="token number">0.0</span>.0.0:2183-<span class="token operator">&gt;</span><span class="token number">2181</span>/tcp   zk3
c8590424503a   zookeeper:3.7.1             <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">3</span> days ago     Up <span class="token number">3</span> days              <span class="token number">2888</span>/tcp, <span class="token number">3888</span>/tcp, <span class="token number">8080</span>/tcp, <span class="token number">0.0</span>.0.0:2182-<span class="token operator">&gt;</span><span class="token number">2181</span>/tcp   zk2
cedc3b13641c   zookeeper:3.7.1             <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">3</span> days ago     Up <span class="token number">3</span> days              <span class="token number">2888</span>/tcp, <span class="token number">3888</span>/tcp, <span class="token number">0.0</span>.0.0:2181-<span class="token operator">&gt;</span><span class="token number">2181</span>/tcp, <span class="token number">8080</span>/tcp   zk1
476c1d4950ac   a4ad24fe52cd                <span class="token string">&quot;/entrypoint.sh mysq…&quot;</span>   <span class="token number">5</span> months ago   Up <span class="token number">12</span> days <span class="token punctuation">(</span>healthy<span class="token punctuation">)</span>   <span class="token number">0.0</span>.0.0:3306-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp, <span class="token number">33060</span>/tcp                      mysql57
a9fd41cc2bbf   8bcb4cae919c                <span class="token string">&quot;/bin/tini -- /usr/l…&quot;</span>   <span class="token number">5</span> months ago   Up <span class="token number">12</span> days             <span class="token number">0.0</span>.0.0:5601-<span class="token operator">&gt;</span><span class="token number">5601</span>/tcp                                 kibana
a7650bb02925   e082d8ac7e5e                <span class="token string">&quot;/bin/tini -- /usr/l…&quot;</span>   <span class="token number">5</span> months ago   Up <span class="token number">12</span> days             <span class="token number">0.0</span>.0.0:9200-<span class="token operator">&gt;</span><span class="token number">9200</span>/tcp, <span class="token number">0.0</span>.0.0:9300-<span class="token operator">&gt;</span><span class="token number">9300</span>/tcp         elasticsearch
👨 HuidongYin 📌  ~ ⌚ <span class="token number">24</span>-01-09 <span class="token number">13</span>:39:30
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>这里我们看到，mysql57 这个容器暴露的端口是 3306 和 33060。所以我们连接到 MySQL 容器后，只能对这两个端口进行访问。</p> <p>端口的暴露可以通过 Docker 镜像进行定义，也可以在容器创建时进行定义。在容器创建时进行定义的方法是借助 <code>--expose</code> 这个选项。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> mysql57 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token operator">=</span>yes <span class="token parameter variable">--expose</span> <span class="token number">13306</span> <span class="token parameter variable">--expose</span> <span class="token number">23306</span> mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里我们为 MySQL 暴露了 13306 和 23306 这两个端口，暴露后我们可以在 <code>docker ps</code> 中看到这两个端口已经成功的打开。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                       NAMES
3c4e645f21d7        mysql:5.7           <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">4</span> seconds ago       Up <span class="token number">3</span> seconds        <span class="token number">3306</span>/tcp, <span class="token number">13306</span>/tcp, <span class="token number">23306</span>/tcp, <span class="token number">33060</span>/tcp   mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>容器暴露了端口只是类似我们打开了容器的防火墙，具体能不能通过这个端口访问容器中的服务，还需要容器中的应用监听并处理来自这个端口的请求。</p> <hr> <h2 id="_4-端口映射"><a href="#_4-端口映射" class="header-anchor">#</a> 4.端口映射</h2> <p>刚才我们提及的都是容器直接通过 Docker 网络进行的互相访问，在实际使用中，还有一个非常常见的需求，就是我们需要在容器外通过网络访问容器中的应用。最简单的一个例子，我们提供了 Web 服务，那么我们就需要提供一种方式访问运行在容器中的 Web 应用。</p> <p>在 Docker 中，提供了一个端口映射的功能实现这样的需求。</p> <p><img src="https://raw.githubusercontent.com/huidongyin/DrawingBed/main/Docker/202401092121534.webp" alt=""></p> <p>通过 Docker 端口映射功能，我们可以把容器的端口映射到宿主操作系统的端口上，当我们从外部访问宿主操作系统的端口时，数据请求就会自动发送给与之关联的容器端口。</p> <p>要映射端口，我们可以在创建容器时使用 -p 或者是 <code>--publish</code> 选项。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-p</span> <span class="token number">443</span>:443 nginx:1.12
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用端口映射选项的格式是 <code>-p &lt;ip&gt;:&lt;host-port&gt;:&lt;container-port&gt;</code>，其中 ip 是宿主操作系统的监听 ip，可以用来控制监听的网卡，默认为 <code>0.0.0.0</code>，也就是监听所有网卡。<code>host-port</code> 和 <code>container-port</code> 分别表示映射到宿主操作系统的端口和容器的端口，这两者是可以不一样的，我们可以将容器的 80 端口映射到宿主操作系统的 8080 端口，传入 -p 8080:80 即可。</p> <p>我们可以在容器列表里看到端口映射的配置。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> <span class="token function">ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                      NAMES
bc79fc5d42a6        nginx:1.12          <span class="token string">&quot;nginx -g 'daemon of…&quot;</span>   <span class="token number">4</span> seconds ago       Up <span class="token number">2</span> seconds        <span class="token number">0.0</span>.0.0:80-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp, <span class="token number">0.0</span>.0.0:443-<span class="token operator">&gt;</span><span class="token number">443</span>/tcp   nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>打印的结果里用 <code>-&gt;</code> 标记了端口的映射关系。</p> <hr></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Docker" title="标签">#Docker</a><a href="/tags/?tag=%E4%BA%91%E8%AE%A1%E7%AE%97" title="标签">#云计算</a></div> <div class="last-updated"><span class="prefix">lastUpdateTime:</span> <span class="time">2024/04/10, 14:00:42</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/bef32fca-5662-35cc-b169-71c34f64b6f4/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">使用容器-运行和管理容器</div></a> <a href="/pages/fcaca3ea-a1a2-3302-941b-263154dd23eb/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">使用容器-管理和存储数据</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/bef32fca-5662-35cc-b169-71c34f64b6f4/" class="prev">使用容器-运行和管理容器</a></span> <span class="next"><a href="/pages/fcaca3ea-a1a2-3302-941b-263154dd23eb/">使用容器-管理和存储数据</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/a2a9d5e6-b580-3ee0-b2c2-5b1557852fd5/"><div>
            小米新零售BI数据领域建设思考与沉淀
            <!----></div></a> <span class="date">01-01</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/aboutme/"><div>
            About Me
            <!----></div></a> <span class="date">9月11日</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/457c4495-1768-3af4-bc65-112ed5748187/"><div>
            PPT-注重内容结构
            <!----></div></a> <span class="date">9月11日</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:huidong.yin247203@gamil.com" title="Email" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/huidongyin/" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/yin_huidong/" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://music.163.com/#/playlist?id=755597173" title="Music" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>huidong.yin | <a href="https://huidongyin.github.io" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.c004ce88.js" defer></script><script src="/assets/js/4.beb5e9d1.js" defer></script><script src="/assets/js/1.39930c36.js" defer></script><script src="/assets/js/3.95e91fe0.js" defer></script><script src="/assets/js/209.a11ead2c.js" defer></script>
  </body>
</html>
