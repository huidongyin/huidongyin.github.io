(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{561:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("Elasticsearch提供了REST API，这些API可供UI组件使用，并可以直接调用这些API来配置和访问Elasticsearch的功能。通过这些API，可以以编程方式与Elasticsearch进行交互，执行索引、搜索、聚合等操作。REST API提供了一种灵活和通用的方式来与Elasticsearch进行集成和交互。下面来看一下常用的"),a("code",[s._v("_cat API")]),s._v(" 和 "),a("code",[s._v("cluster/node API")]),s._v("。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_1-cat-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cat-api"}},[s._v("#")]),s._v(" 1.cat API")]),s._v(" "),a("p",[a("code",[s._v("CAT API")]),s._v("主要用于人类使用，因为输出格式化为易于阅读和理解的方式。这些API对于管理员、开发人员以及任何需要以简洁易读的格式检索集群、索引或节点信息的人员非常有用。")]),s._v(" "),a("p",[s._v("通过使用"),a("code",[s._v("CAT API")]),s._v("，可以快速获取有关Elasticsearch集群的重要信息，无需复杂的查询或解析JSON响应。")]),s._v(" "),a("p",[a("code",[s._v("CAT API")]),s._v("提供了各种端点来从Elasticsearch中检索不同类型的数据，For Example：")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("cat indices")]),s._v("：该API提供了Elasticsearch集群中所有索引的紧凑摘要，包括索引名称、文档计数、大小和其他元数据等信息。")]),s._v(" "),a("li",[a("code",[s._v("cat shards")]),s._v("：该API显示集群中分片的信息，包括它们的状态、分配情况和其他详细信息。")]),s._v(" "),a("li",[a("code",[s._v("cat nodes")]),s._v("：该API返回集群中节点的信息，包括它们的角色、IP地址和其他相关数据。")]),s._v(" "),a("li",[a("code",[s._v("cat health")]),s._v("：该API显示集群的整体健康状况，包括节点数量、活动分片数和其他健康相关信息。")]),s._v(" "),a("li",[a("code",[s._v("cat aliases")]),s._v("：该API列出集群中定义的所有别名及其关联的索引。")])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("CAT API")]),s._v("仅用于通过Kibana控制台或命令行进行人工查看。它们不适用于应用程序使用。对于应用程序使用，建议使用相应的"),a("code",[s._v("JSON API")]),s._v("。")])]),s._v(" "),a("p",[a("strong",[s._v("verbose")])]),s._v(" "),a("p",[a("code",[s._v("v")]),s._v("参数可以打印详细信息。For Example:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET _cat/master?v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### response")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("                     "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\nYWfAPAonTteQ9GO__aOjQw "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("h参数")])]),s._v(" "),a("p",[a("code",[s._v("h")]),s._v("参数可以强制只展示某些列。")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/cat.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("更多参数->官方文档"),a("OutboundLink")],1)])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"cat-aliases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-aliases"}},[s._v("#")]),s._v(" cat aliases")]),s._v(" "),a("p",[s._v("该API用于获取集群的索引别名，包括过滤器和路由信息。")]),s._v(" "),a("p",[s._v("查看所有的索引别名。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看所有的索引别名")]),s._v("\nGET _cat/aliases?v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v("                index                  filter routing.index routing.search is_write_index\n.kibana_task_manager .kibana_task_manager_1 -      -             -              -\n.kibana              .kibana_1              -      -             -              -\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("查看某一个指定的索引别名。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看某一个索引别名")]),s._v("\nGET _cat/aliases/.kibana_task_manager?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v("                index                  filter routing.index routing.search is_write_index\n.kibana_task_manager .kibana_task_manager_1 -      -             -              -\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"cat-health"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-health"}},[s._v("#")]),s._v(" cat health")]),s._v(" "),a("p",[s._v("该API返回集群的健康状态，类似于集群健康API。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/health?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\nepoch      timestamp cluster        status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1688996657")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":44:17  docker-cluster yellow          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                  -                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64.3")]),s._v("%\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"cat-indices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-indices"}},[s._v("#")]),s._v(" cat indices")]),s._v(" "),a("p",[s._v("该API返回集群中索引的高级信息，包括数据流的后备索引。")]),s._v(" "),a("p",[s._v("返回所有索引的信息。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/indices?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\nhealth status index                    uuid                   pri rep docs.count docs.deleted store.size pri.store.size\nyellow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("                     7gJSMomWTgmZTrCC-nj4Pg   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(".3kb         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(".3kb\nyellow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   sale_store_day           szfu4GDTR96EmTTSLmWVlg   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".1kb          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".1kb\ngreen  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   .apm-custom-link         pO5XDGzkTo27JY2j3qYykw   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       208b           208b\ngreen  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   .kibana_task_manager_1   h0ck6yAXTrCcuBImgrHpbg   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       24kb           24kb\ngreen  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   .apm-agent-configuration MNfKD_6RTd6Trtw96sWH3w   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       208b           208b\nyellow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   topic                    DjF8rPKPStK7w-2NaFSMiw   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".9kb          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".9kb\ngreen  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   .kibana_1                fLZb8cfXQjeQ48NwoG2r6w   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("251")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("142")]),s._v(".3kb        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("142")]),s._v(".3kb\nyellow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   logs                     pvSDlwZ8RRGHJfWPU448gg   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".9kb          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".9kb\nyellow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   order                    X2l5ZcXoSUuiYN6CbznduA   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(".2kb        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(".2kb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("返回某个指定索引的信息。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/indices/order?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#response")]),s._v("\nhealth status index uuid                   pri rep docs.count docs.deleted store.size pri.store.size\nyellow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("   order X2l5ZcXoSUuiYN6CbznduA   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(".2kb        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(".2kb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"cat-master"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-master"}},[s._v("#")]),s._v(" cat master")]),s._v(" "),a("p",[s._v("该API返回有关主节点的信息，包括ID、绑定的IP地址和名称。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/master?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("                     "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\nYWfAPAonTteQ9GO__aOjQw "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"cat-nodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-nodes"}},[s._v("#")]),s._v(" cat nodes")]),s._v(" "),a("p",[s._v("返回集群相关的信息。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/nodes?v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("         heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),s._v(" dilmrt    *      ece13c2201ae\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("这里返回的是默认的列，如果需要返回指定的列，可以参考"),a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/cat-nodes.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1),s._v("。")])]),s._v(" "),a("h3",{attrs:{id:"cat-pending-tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-pending-tasks"}},[s._v("#")]),s._v(" cat pending tasks")]),s._v(" "),a("p",[s._v("该API返回尚未执行的集群级别的更改，类似于待处理的集群任务API。")]),s._v(" "),a("p",[s._v("查看所有未执行的任务。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/pending_tasks?v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"cat-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-plugins"}},[s._v("#")]),s._v(" cat plugins")]),s._v(" "),a("p",[s._v("该API返回集群中每个节点上正在运行的插件列表。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/plugins?v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("s")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("component"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("h")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("name,component,version,description\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\nname         component   version description\nece13c2201ae analysis-ik "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.17")]),s._v(".0   IK Analyzer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Elasticsearch\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"cat-shards"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-shards"}},[s._v("#")]),s._v(" cat shards")]),s._v(" "),a("p",[s._v("shards命令提供了节点包含哪些分片的详细视图。它会告诉你分片是主分片还是副本分片，文档数量，占用磁盘空间的字节数，以及所在的节点。")]),s._v(" "),a("p",[s._v("查看所有的分片信息。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET _cat/shards?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\nindex                    shard prirep state      docs   store "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\nlogs                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".9kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\nlogs                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     r      UNASSIGNED                         \ntopic                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".9kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\ntopic                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     r      UNASSIGNED                         \n.apm-agent-configuration "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    208b "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n.apm-custom-link         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    208b "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n.kibana_1                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("272")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127")]),s._v(".5kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\norder                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(".2kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\norder                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     r      UNASSIGNED                         \nsale_store_day           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".1kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\nsale_store_day           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     r      UNASSIGNED                         \n.kibana_task_manager_1   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("    24kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(".3kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     r      UNASSIGNED\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("查看指定别名/索引的分片信息，支持模糊搜索。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET _cat/shards/order?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\nindex shard prirep state      docs   store "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\norder "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     p      STARTED    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114")]),s._v(".2kb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\norder "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     r      UNASSIGNED\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"cat-tasks-management-task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-tasks-management-task"}},[s._v("#")]),s._v(" cat tasks management task")]),s._v(" "),a("p",[s._v("返回当前在集群中执行的任务的信息，类似于任务管理API。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET _cat/tasks?v"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\naction                         task_id                        parent_task_id                 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v("      start_time    timestamp running_time "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\ncluster:monitor/tasks/lists    YWfAPAonTteQ9GO__aOjQw:3028372 -                              transport "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1688998957964")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":22:37  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(".5ms       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\ncluster:monitor/tasks/lists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" YWfAPAonTteQ9GO__aOjQw:3028373 YWfAPAonTteQ9GO__aOjQw:3028372 direct    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1688998957964")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":22:37  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(".4ms       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"cat-template"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-template"}},[s._v("#")]),s._v(" cat template")]),s._v(" "),a("p",[s._v("返回索引模板相关的信息。")]),s._v(" "),a("p",[s._v("查看所有的模板。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/templates\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\n.monitoring-es                  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(".monitoring-es-7-*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000199")]),s._v("\n.logstash-management            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(".logstash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          \n.management-beats               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(".management-beats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("70000")]),s._v("\n.monitoring-logstash            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(".monitoring-logstash-7-*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000199")]),s._v("\n.watches                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(".watches*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2147483647")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n.monitoring-alerts-7            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(".monitoring-alerts-7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000199")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("查看某一个指定的模板。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/templates/.logstash-management?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\nname                 index_patterns order version\n.logstash-management "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(".logstash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"cat-allocation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-allocation"}},[s._v("#")]),s._v(" cat allocation")]),s._v(" "),a("p",[s._v("提供每个数据节点分配的分片数量及其磁盘空间的快照信息。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/allocation?v\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## response")]),s._v("\nshards disk.indices disk.used disk.avail disk.total disk.percent "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("282")]),s._v(".7kb    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(".2gb     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66")]),s._v(".3gb     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("78")]),s._v(".6gb           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2 ece13c2201ae\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("                                                                                 UNASSIGNED\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("查看指定的某一个节点。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/allocation/ece13c2201ae?v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"cat-count"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat-count"}},[s._v("#")]),s._v(" cat count")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /_cat/count/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\nGET /_cat/count\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("code",[s._v("target")]),s._v(" 是一个逗号分隔的数据流、索引和别名列表，用于限制请求的范围。支持使用通配符（_）进行匹配。如果要针对所有数据流和索引进行操作，可以省略该参数，或使用 _ 或 _all。")]),s._v(" "),a("hr"),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/cat.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("更多内容->官方文档"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"_2-cluster-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-cluster-api"}},[s._v("#")]),s._v(" 2. cluster api")]),s._v(" "),a("p",[s._v("集群管理的 API 提供了获取或者更改集群信息的功能，例如集群节点过滤、查看集群信息、查看节点信息、更新集群设置、重置路由等。")]),s._v(" "),a("h3",{attrs:{id:"_2-1-节点过滤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-节点过滤"}},[s._v("#")]),s._v(" 2.1 节点过滤")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取所有节点")]),s._v("\nGET /_nodes/_all\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("除了 "),a("code",[s._v("_all")]),s._v(" 以外，还支持以下参数。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("参数")]),s._v(" "),a("th",[s._v("描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("_all")]),s._v(" "),a("td",[s._v("列出所有节点")])]),s._v(" "),a("tr",[a("td",[s._v("_local")]),s._v(" "),a("td",[s._v("列出本地节点")])]),s._v(" "),a("tr",[a("td",[s._v("_master")]),s._v(" "),a("td",[s._v("列出主节点")])]),s._v(" "),a("tr",[a("td",[s._v("IP 或者主机名字")]),s._v(" "),a("td",[s._v("列出指定 IP 或者主机名字的节点")])]),s._v(" "),a("tr",[a("td",[s._v("节点 ID 或者名称")]),s._v(" "),a("td",[s._v("列出指定 ID 或者名称的节点")])]),s._v(" "),a("tr",[a("td",[s._v("*")]),s._v(" "),a("td",[s._v("IP、主机名字、节点 ID、名称都可以包括通配符")])]),s._v(" "),a("tr",[a("td",[s._v("master:true/false")]),s._v(" "),a("td",[s._v("列出主节点 / 不列出主节点")])]),s._v(" "),a("tr",[a("td",[s._v("data:true/false")]),s._v(" "),a("td",[s._v("列出数据节点 / 不列出数据节点")])]),s._v(" "),a("tr",[a("td",[s._v("ingest:true/false")]),s._v(" "),a("td",[s._v("列出索引预处理节点 / 不列出索引预处理节点")])]),s._v(" "),a("tr",[a("td",[s._v("coordinating_only:true/false")]),s._v(" "),a("td",[s._v("列出协调节点 / 不列出协调节点")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-2-查看集群信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-查看集群信息"}},[s._v("#")]),s._v(" 2.2 查看集群信息")]),s._v(" "),a("p",[s._v("可以使用集群信息查看的接口查看集群健康状态、集群状态、集群统计信息、集群的设置等，For Example:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看集群健康状态")]),s._v("\nGET /_cluster/health\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看集群状态")]),s._v("\nGET /_cluster/state\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看集群统计信息")]),s._v("\nGET /_cluster/stats?human"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("pretty\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看集群的设置")]),s._v("\nGET /_cluster/settings?include_defaults"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"_2-3-查看节点信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-查看节点信息"}},[s._v("#")]),s._v(" 2.3 查看节点信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取节点信息的请求格式")]),s._v("\nGET /_nodes\nGET /_nodes/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("node_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nGET /_nodes/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("metric"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nGET /_nodes/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("node_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("metric"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取节点信息")]),s._v("\nGET /_nodes\nGET /_nodes/node_id1,node_id2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取 node_id1 和 node_id2 的信息")]),s._v("\nGET /_nodes/stats \nGET /_nodes/node_id1,node_id2/stats "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取 node_id1 和 node_id2 的统计信息")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("blockquote",[a("p",[a("code",[s._v("metric")]),s._v(" 可以指定获取结果中的每个部分。")])]),s._v(" "),a("h3",{attrs:{id:"_2-4-更新集群设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-更新集群设置"}},[s._v("#")]),s._v(" 2.4 更新集群设置")]),s._v(" "),a("p",[s._v("For Example：设置集群恢复时的吞吐量，其默认值为 0 的时候为无限制。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT /_cluster/settings\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistent"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"indices.recovery.max_bytes_per_sec"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100m"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_2-5-路由重置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-路由重置"}},[s._v("#")]),s._v(" 2.5 路由重置")]),s._v(" "),a("p",[a("code",[s._v("reroute API")]),s._v(" 可以允许用户手动修改集群中分片的分配情况。使用 "),a("code",[s._v("reroute API")]),s._v(" 可以将一个分片从某个节点移到另一个节点，也可以将未分配的分片指定分配到某个节点。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST /_cluster/reroute\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commands"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"move"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shard"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from_node"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node1"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"to_node"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node2"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"allocate_replica"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shard"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node3"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v('如上，使用 "move" 指令，将索引 "test" 的分片 0 从节点 "node1" 移动到了 "node2"。使用 "allocate_replica" 指令将 "test" 索引未分配的分片 1 的副本分配到节点 "node3"。')]),s._v(" "),a("blockquote",[a("p",[s._v("在执行了任何路由重置指令后， ES 将会执行重新平衡数据的操作来保持平衡状态，但是这个操作受 "),a("code",[s._v("cluster.routing.rebalance.enable")]),s._v("（是否允许重新平衡） 设置值的影响。")])]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/cluster.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("更多内容->官方文档"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);